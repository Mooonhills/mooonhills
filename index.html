<!DOCTYPE html>
<html>
<head>
  <title>Web3 Wallet Connection</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>
</head>
<body>
  <h1>Web3 Wallet Connection</h1>

  <button onclick="connectWeb3()">Connect to Wallet</button>

  <div>
    <label for="receiverAddress">Receiver Address:</label>
    <input type="text" id="receiverAddress">
    <button onclick="sendToken()">Send</button>
  </div>

  <script>
    let web3;

    async function connectWeb3() {
      // Check if web3 is already injected by the wallet provider
      if (typeof web3 !== 'undefined') {
        web3 = new Web3(web3.currentProvider);
      } else {
        // If no web3 instance is detected, fallback to a local Ganache test network
        web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7545"));
      }

      try {
        // Request access to the user's accounts
        await window.ethereum.enable();

        // Get the current account
        const accounts = await web3.eth.getAccounts();
        const currentAccount = accounts[0];

        console.log("Connected to wallet!");
        console.log("Current account:", currentAccount);

        // You can now interact with the Ethereum network using the web3 object

      } catch (error) {
        console.error("Error connecting to wallet:", error);
      }
    }

    async function sendToken() {
      const receiverAddress = document.getElementById("receiverAddress").value;

      try {
        // Replace 'ABI_GOES_HERE' with the ABI of your token contract
        const tokenABI = ABI_GOES_HERE;
        const contractAddress = 'CONTRACT_ADDRESS_GOES_HERE';

        const contract = new web3.eth.Contract(tokenABI, contractAddress);

        // Replace 'TOKEN_ID_GOES_HERE' with the desired token ID
        const tokenId = TOKEN_ID_GOES_HERE;

        // Call the transfer function of your token contract
        await contract.methods.transfer(receiverAddress, tokenId).send({ from: web3.eth.defaultAccount });

        console.log("Token sent successfully!");

      } catch (error) {
        console.error("Error sending token:", error);
      }
    }
  </script>
</body>
</html>
